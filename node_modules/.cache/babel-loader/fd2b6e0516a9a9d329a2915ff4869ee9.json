{"ast":null,"code":"\"use strict\";\n\nvar __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n    m = s && o[s],\n    i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function () {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nvar core_1 = require(\"@aws-amplify/core\");\nvar zen_observable_ts_1 = __importDefault(require(\"zen-observable-ts\"));\nvar ReachabilityNavigator = /** @class */function () {\n  function ReachabilityNavigator() {}\n  ReachabilityNavigator.prototype.networkMonitor = function (netInfo) {\n    if (core_1.browserOrNode().isNode) {\n      return zen_observable_ts_1.default.from([{\n        online: true\n      }]);\n    }\n    var globalObj = core_1.isWebWorker() ? self : window;\n    return new zen_observable_ts_1.default(function (observer) {\n      observer.next({\n        online: globalObj.navigator.onLine\n      });\n      var notifyOnline = function () {\n        return observer.next({\n          online: true\n        });\n      };\n      var notifyOffline = function () {\n        return observer.next({\n          online: false\n        });\n      };\n      globalObj.addEventListener('online', notifyOnline);\n      globalObj.addEventListener('offline', notifyOffline);\n      ReachabilityNavigator._observers.push(observer);\n      return function () {\n        globalObj.removeEventListener('online', notifyOnline);\n        globalObj.removeEventListener('offline', notifyOffline);\n        ReachabilityNavigator._observers = ReachabilityNavigator._observers.filter(function (_observer) {\n          return _observer !== observer;\n        });\n      };\n    });\n  };\n  // expose observers to simulate offline mode for integration testing\n  ReachabilityNavigator._observerOverride = function (status) {\n    var e_1, _a;\n    var _loop_1 = function (observer) {\n      if (observer.closed) {\n        ReachabilityNavigator._observers = ReachabilityNavigator._observers.filter(function (_observer) {\n          return _observer !== observer;\n        });\n        return \"continue\";\n      }\n      observer.next(status);\n    };\n    try {\n      for (var _b = __values(ReachabilityNavigator._observers), _c = _b.next(); !_c.done; _c = _b.next()) {\n        var observer = _c.value;\n        _loop_1(observer);\n      }\n    } catch (e_1_1) {\n      e_1 = {\n        error: e_1_1\n      };\n    } finally {\n      try {\n        if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n      } finally {\n        if (e_1) throw e_1.error;\n      }\n    }\n  };\n  ReachabilityNavigator._observers = [];\n  return ReachabilityNavigator;\n}();\nexports.default = ReachabilityNavigator;","map":{"version":3,"names":["core_1","require","zen_observable_ts_1","__importDefault","ReachabilityNavigator","prototype","networkMonitor","netInfo","browserOrNode","isNode","default","from","online","globalObj","isWebWorker","self","window","observer","next","navigator","onLine","notifyOnline","notifyOffline","addEventListener","_observers","push","removeEventListener","filter","_observer","_observerOverride","status","closed","_b","__values","_c","done","value"],"sources":["../../src/Util/Reachability.ts"],"sourcesContent":[null],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,mBAAA,GAAAC,eAAA,CAAAF,OAAA;AAMA,IAAAG,qBAAA;EAAA,SAAAA,sBAAA,GA8CA;EAzCCA,qBAAA,CAAAC,SAAA,CAAAC,cAAc,GAAd,UAAeC,OAAa;IAC3B,IAAIP,MAAA,CAAAQ,aAAa,EAAE,CAACC,MAAM,EAAE;MAC3B,OAAOP,mBAAA,CAAAQ,OAAU,CAACC,IAAI,CAAC,CAAC;QAAEC,MAAM,EAAE;MAAI,CAAE,CAAC,CAAC;;IAG3C,IAAMC,SAAS,GAAGb,MAAA,CAAAc,WAAW,EAAE,GAAGC,IAAI,GAAGC,MAAM;IAE/C,OAAO,IAAId,mBAAA,CAAAQ,OAAU,CAAC,UAAAO,QAAQ;MAC7BA,QAAQ,CAACC,IAAI,CAAC;QAAEN,MAAM,EAAEC,SAAS,CAACM,SAAS,CAACC;MAAM,CAAE,CAAC;MAErD,IAAMC,YAAY,GAAG,SAAAA,CAAA;QAAM,OAAAJ,QAAQ,CAACC,IAAI,CAAC;UAAEN,MAAM,EAAE;QAAI,CAAE,CAAC;MAA/B,CAA+B;MAC1D,IAAMU,aAAa,GAAG,SAAAA,CAAA;QAAM,OAAAL,QAAQ,CAACC,IAAI,CAAC;UAAEN,MAAM,EAAE;QAAK,CAAE,CAAC;MAAhC,CAAgC;MAE5DC,SAAS,CAACU,gBAAgB,CAAC,QAAQ,EAAEF,YAAY,CAAC;MAClDR,SAAS,CAACU,gBAAgB,CAAC,SAAS,EAAED,aAAa,CAAC;MAEpDlB,qBAAqB,CAACoB,UAAU,CAACC,IAAI,CAACR,QAAQ,CAAC;MAE/C,OAAO;QACNJ,SAAS,CAACa,mBAAmB,CAAC,QAAQ,EAAEL,YAAY,CAAC;QACrDR,SAAS,CAACa,mBAAmB,CAAC,SAAS,EAAEJ,aAAa,CAAC;QAEvDlB,qBAAqB,CAACoB,UAAU,GAAGpB,qBAAqB,CAACoB,UAAU,CAACG,MAAM,CACzE,UAAAC,SAAS;UAAI,OAAAA,SAAS,KAAKX,QAAQ;QAAtB,CAAsB,CACnC;MACF,CAAC;IACF,CAAC,CAAC;EACH,CAAC;EAED;EACeb,qBAAA,CAAAyB,iBAAiB,GAAhC,UAAiCC,MAAqB;;4BAC1Cb,QAAQ;MAClB,IAAIA,QAAQ,CAACc,MAAM,EAAE;QACpB3B,qBAAqB,CAACoB,UAAU,GAAGpB,qBAAqB,CAACoB,UAAU,CAACG,MAAM,CACzE,UAAAC,SAAS;UAAI,OAAAA,SAAS,KAAKX,QAAQ;QAAtB,CAAsB,CACnC;;;MAGFA,QAAQ,CAACC,IAAI,CAACY,MAAM,CAAC;;;MAPtB,KAAuB,IAAAE,EAAA,GAAAC,QAAA,CAAA7B,qBAAqB,CAACoB,UAAU,GAAAU,EAAA,GAAAF,EAAA,CAAAd,IAAA,KAAAgB,EAAA,CAAAC,IAAA,EAAAD,EAAA,GAAAF,EAAA,CAAAd,IAAA;QAAlD,IAAMD,QAAQ,GAAAiB,EAAA,CAAAE,KAAA;gBAARnB,QAAQ;;;;;;;;;;;;;EASpB,CAAC;EA5Ccb,qBAAA,CAAAoB,UAAU,GAErB,EAAE;EA2CP,OAAApB,qBAAC;CAAA,CA9CD;kBAAqBA,qBAAqB","ignoreList":[]},"metadata":{},"sourceType":"script"}