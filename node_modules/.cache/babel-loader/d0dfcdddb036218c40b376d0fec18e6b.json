{"ast":null,"code":"var _jsxFileName = \"/Users/richa/Desktop/Projects/demo-project/store/bookstore-v2/src/context/books.js\";\nimport React, { useEffect, useState } from \"react\";\nimport { API, graphqlOperation } from \"aws-amplify\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { listBooks } from \"../api/queries\";\nimport { processOrder } from \"../api/mutations\";\nconst BookContext = React.createContext();\nconst BookProvider = ({\n  children\n}) => {\n  const [books, setBooks] = useState([]);\n  const [featured, setFeatured] = useState([]);\n  const [loading, setLoading] = useState(false);\n  useEffect(() => {\n    fetchBooks();\n  }, []);\n  const checkout = async orderDetails => {\n    const payload = {\n      id: uuidv4(),\n      ...orderDetails\n    };\n    try {\n      await API.graphql(graphqlOperation(processOrder, {\n        input: payload\n      }));\n      console.log(\"Order is successful\");\n    } catch (err) {\n      console.log(err);\n    }\n  };\n  const fetchBooks = async () => {\n    try {\n      setLoading(true);\n      // Switch authMode to API_KEY for public access\n      const {\n        data\n      } = await API.graphql({\n        query: listBooks,\n        authMode: \"API_KEY\"\n      });\n      const books = data.listBooks.items;\n      const featured = books.filter(book => {\n        return !!book.featured;\n      });\n      setBooks(books);\n      setFeatured(featured);\n      setLoading(false);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n  return /*#__PURE__*/React.createElement(BookContext.Provider, {\n    value: {\n      books,\n      featured,\n      loading,\n      checkout\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 5\n    }\n  }, children);\n};\nexport { BookContext, BookProvider };","map":{"version":3,"names":["React","useEffect","useState","API","graphqlOperation","v4","uuidv4","listBooks","processOrder","BookContext","createContext","BookProvider","children","books","setBooks","featured","setFeatured","loading","setLoading","fetchBooks","checkout","orderDetails","payload","id","graphql","input","console","log","err","data","query","authMode","items","filter","book","createElement","Provider","value","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["/Users/richa/Desktop/Projects/demo-project/store/bookstore-v2/src/context/books.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { API, graphqlOperation } from \"aws-amplify\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { listBooks } from \"../api/queries\";\nimport { processOrder } from \"../api/mutations\";\n\nconst BookContext = React.createContext();\n\nconst BookProvider = ({ children }) => {\n  const [books, setBooks] = useState([]);\n  const [featured, setFeatured] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  useEffect(() => {\n    fetchBooks();\n  }, []);\n\n  const checkout = async (orderDetails) => {\n    const payload = {\n      id: uuidv4(),\n      ...orderDetails\n    };\n    try {\n      await API.graphql(graphqlOperation(processOrder, { input: payload }));\n      console.log(\"Order is successful\");\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const fetchBooks = async () => {\n    try {\n      setLoading(true);\n      // Switch authMode to API_KEY for public access\n      const { data } = await API.graphql({\n        query: listBooks,\n        authMode: \"API_KEY\"\n      });\n      const books = data.listBooks.items;\n      const featured = books.filter((book) => {\n        return !!book.featured;\n      });\n      setBooks(books);\n      setFeatured(featured);\n      setLoading(false);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  return (\n    <BookContext.Provider value={{ books, featured, loading, checkout }}>\n      {children}\n    </BookContext.Provider>\n  );\n};\n\nexport { BookContext, BookProvider };\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,GAAG,EAAEC,gBAAgB,QAAQ,aAAa;AACnD,SAASC,EAAE,IAAIC,MAAM,QAAQ,MAAM;AACnC,SAASC,SAAS,QAAQ,gBAAgB;AAC1C,SAASC,YAAY,QAAQ,kBAAkB;AAE/C,MAAMC,WAAW,GAAGT,KAAK,CAACU,aAAa,CAAC,CAAC;AAEzC,MAAMC,YAAY,GAAGA,CAAC;EAAEC;AAAS,CAAC,KAAK;EACrC,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACa,QAAQ,EAAEC,WAAW,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EAC5C,MAAM,CAACe,OAAO,EAAEC,UAAU,CAAC,GAAGhB,QAAQ,CAAC,KAAK,CAAC;EAE7CD,SAAS,CAAC,MAAM;IACdkB,UAAU,CAAC,CAAC;EACd,CAAC,EAAE,EAAE,CAAC;EAEN,MAAMC,QAAQ,GAAG,MAAOC,YAAY,IAAK;IACvC,MAAMC,OAAO,GAAG;MACdC,EAAE,EAAEjB,MAAM,CAAC,CAAC;MACZ,GAAGe;IACL,CAAC;IACD,IAAI;MACF,MAAMlB,GAAG,CAACqB,OAAO,CAACpB,gBAAgB,CAACI,YAAY,EAAE;QAAEiB,KAAK,EAAEH;MAAQ,CAAC,CAAC,CAAC;MACrEI,OAAO,CAACC,GAAG,CAAC,qBAAqB,CAAC;IACpC,CAAC,CAAC,OAAOC,GAAG,EAAE;MACZF,OAAO,CAACC,GAAG,CAACC,GAAG,CAAC;IAClB;EACF,CAAC;EAED,MAAMT,UAAU,GAAG,MAAAA,CAAA,KAAY;IAC7B,IAAI;MACFD,UAAU,CAAC,IAAI,CAAC;MAChB;MACA,MAAM;QAAEW;MAAK,CAAC,GAAG,MAAM1B,GAAG,CAACqB,OAAO,CAAC;QACjCM,KAAK,EAAEvB,SAAS;QAChBwB,QAAQ,EAAE;MACZ,CAAC,CAAC;MACF,MAAMlB,KAAK,GAAGgB,IAAI,CAACtB,SAAS,CAACyB,KAAK;MAClC,MAAMjB,QAAQ,GAAGF,KAAK,CAACoB,MAAM,CAAEC,IAAI,IAAK;QACtC,OAAO,CAAC,CAACA,IAAI,CAACnB,QAAQ;MACxB,CAAC,CAAC;MACFD,QAAQ,CAACD,KAAK,CAAC;MACfG,WAAW,CAACD,QAAQ,CAAC;MACrBG,UAAU,CAAC,KAAK,CAAC;IACnB,CAAC,CAAC,OAAOU,GAAG,EAAE;MACZF,OAAO,CAACC,GAAG,CAACC,GAAG,CAAC;IAClB;EACF,CAAC;EAED,oBACE5B,KAAA,CAAAmC,aAAA,CAAC1B,WAAW,CAAC2B,QAAQ;IAACC,KAAK,EAAE;MAAExB,KAAK;MAAEE,QAAQ;MAAEE,OAAO;MAAEG;IAAS,CAAE;IAAAkB,MAAA;IAAAC,QAAA;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAA,GACjE/B,QACmB,CAAC;AAE3B,CAAC;AAED,SAASH,WAAW,EAAEE,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module"}