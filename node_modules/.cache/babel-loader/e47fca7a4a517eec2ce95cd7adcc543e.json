{"ast":null,"code":"var _jsxFileName = \"/Users/richa/Desktop/Projects/demo-project/store/bookstore-v2/src/components/CheckoutForm.js\";\nimport React, { useState, useEffect, useContext } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { BookContext } from \"../context/books\";\nimport { CartContext } from \"../context/cart\";\nimport { CardElement, useElements, useStripe } from \"@stripe/react-stripe-js\";\nconst CARD_ELEMENT_OPTIONS = {\n  style: {\n    base: {\n      color: \"#32325d\",\n      fontFamily: '\"Helvetica Neue\", Helvetica, sans-serif',\n      fontSmoothing: \"antialiased\",\n      fontSize: \"16px\",\n      \"::placeholder\": {\n        color: \"#aab7c4\"\n      }\n    },\n    invalid: {\n      color: \"#fa755a\",\n      iconColor: \"#fa755a\"\n    }\n  }\n};\nconst CheckoutForm = () => {\n  const {\n    cart,\n    total,\n    clearCart\n  } = useContext(CartContext);\n  const {\n    checkout\n  } = useContext(BookContext);\n  const [orderDetails, setOrderDetails] = useState({\n    cart,\n    total,\n    address: null,\n    token: null\n  });\n  const [error, setError] = useState(null);\n  const stripe = useStripe();\n  const elements = useElements();\n  const history = useHistory();\n  useEffect(() => {\n    if (orderDetails.token) {\n      checkout(orderDetails);\n      //clearCart();\n      //history.push(\"/\");\n    }\n  }, [orderDetails]);\n\n  // Handle real-time validation errors from the card Element.\n  const handleChange = event => {\n    if (event.error) {\n      setError(event.error.message);\n    } else {\n      setError(null);\n    }\n  };\n\n  // Handle form submission.\n  const handleSubmit = async event => {\n    event.preventDefault();\n    const card = elements.getElement(CardElement);\n    const result = await stripe.createToken(card);\n    if (result.error) {\n      // Inform the user if there was an error.\n      setError(result.error.message);\n    } else {\n      setError(null);\n      // Send the token to your server.\n      const token = result.token;\n      setOrderDetails({\n        ...orderDetails,\n        token: token.id\n      });\n    }\n  };\n  return /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"checkout-address\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 9\n    }\n  }, \"Shipping Address\"), /*#__PURE__*/React.createElement(\"input\", {\n    id: \"checkout-address\",\n    type: \"text\",\n    onChange: e => setOrderDetails({\n      ...orderDetails,\n      address: e.target.value\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"stripe-section\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"stripe-element\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 11\n    }\n  }, \" Credit or debit card \"), /*#__PURE__*/React.createElement(CardElement, {\n    id: \"stripe-element\",\n    options: CARD_ELEMENT_OPTIONS,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-errors\",\n    role: \"alert\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, error)), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    className: \"btn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }\n  }, \"Submit Payment\"));\n};\nexport default CheckoutForm;","map":{"version":3,"names":["React","useState","useEffect","useContext","useHistory","BookContext","CartContext","CardElement","useElements","useStripe","CARD_ELEMENT_OPTIONS","style","base","color","fontFamily","fontSmoothing","fontSize","invalid","iconColor","CheckoutForm","cart","total","clearCart","checkout","orderDetails","setOrderDetails","address","token","error","setError","stripe","elements","history","handleChange","event","message","handleSubmit","preventDefault","card","getElement","result","createToken","id","createElement","onSubmit","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","className","htmlFor","type","onChange","e","target","value","options","role"],"sources":["/Users/richa/Desktop/Projects/demo-project/store/bookstore-v2/src/components/CheckoutForm.js"],"sourcesContent":["import React, { useState, useEffect, useContext } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport { BookContext } from \"../context/books\";\nimport { CartContext } from \"../context/cart\";\nimport { CardElement, useElements, useStripe } from \"@stripe/react-stripe-js\";\n\nconst CARD_ELEMENT_OPTIONS = {\n  style: {\n    base: {\n      color: \"#32325d\",\n      fontFamily: '\"Helvetica Neue\", Helvetica, sans-serif',\n      fontSmoothing: \"antialiased\",\n      fontSize: \"16px\",\n      \"::placeholder\": {\n        color: \"#aab7c4\"\n      }\n    },\n    invalid: {\n      color: \"#fa755a\",\n      iconColor: \"#fa755a\"\n    }\n  }\n};\n\nconst CheckoutForm = () => {\n  const { cart, total, clearCart } = useContext(CartContext);\n  const { checkout } = useContext(BookContext);\n  const [orderDetails, setOrderDetails] = useState({ cart, total, address: null, token: null });\n  const [error, setError] = useState(null);\n  const stripe = useStripe();\n  const elements = useElements();\n  const history = useHistory();\n\n  useEffect(() => {\n    if (orderDetails.token) {\n      checkout(orderDetails);\n      //clearCart();\n      //history.push(\"/\");\n    }\n  }, [orderDetails]);\n\n  // Handle real-time validation errors from the card Element.\n  const handleChange = (event) => {\n    if (event.error) {\n      setError(event.error.message);\n    } else {\n      setError(null);\n    }\n  };\n\n  // Handle form submission.\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    const card = elements.getElement(CardElement);\n    const result = await stripe.createToken(card);\n    if (result.error) {\n      // Inform the user if there was an error.\n      setError(result.error.message);\n    } else {\n      setError(null);\n      // Send the token to your server.\n      const token = result.token;\n      setOrderDetails({ ...orderDetails, token: token.id });\n    }\n  };\n\n  return (\n    <form onSubmit={handleSubmit}>\n      <div className=\"checkout-form\">\n        <label htmlFor=\"checkout-address\">Shipping Address</label>\n        <input\n          id=\"checkout-address\"\n          type=\"text\"\n          onChange={(e) => setOrderDetails({ ...orderDetails, address: e.target.value })}\n        />\n        <div className=\"stripe-section\">\n          <label htmlFor=\"stripe-element\"> Credit or debit card </label>\n          <CardElement id=\"stripe-element\" options={CARD_ELEMENT_OPTIONS} onChange={handleChange} />\n        </div>\n        <div className=\"card-errors\" role=\"alert\">\n          {error}\n        </div>\n      </div>\n      <button type=\"submit\" className=\"btn\">\n        Submit Payment\n      </button>\n    </form>\n  );\n};\n\nexport default CheckoutForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}