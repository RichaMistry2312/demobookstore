{"ast":null,"code":"export function attachEventProps(node, newProps, oldProps) {\n  if (oldProps === void 0) {\n    oldProps = {};\n  }\n  var className = getClassName(node.classList, newProps, oldProps);\n  if (className) {\n    node.className = className;\n  }\n  Object.keys(newProps).forEach(function (name) {\n    if (name === 'children' || name === 'style' || name === 'ref' || name === 'className') {\n      return;\n    }\n    if (name.indexOf('on') === 0 && name[2] === name[2].toUpperCase()) {\n      var eventName = name.substring(2);\n      var eventNameLc = eventName[0].toLowerCase() + eventName.substring(1);\n      if (!isCoveredByReact(eventNameLc)) {\n        syncEvent(node, eventNameLc, newProps[name]);\n      }\n    } else {\n      node[name] = newProps[name];\n    }\n  });\n}\nexport function getClassName(classList, newProps, oldProps) {\n  // map the classes to Maps for performance\n  var currentClasses = arrayToMap(classList);\n  var incomingPropClasses = arrayToMap(newProps.className ? newProps.className.split(' ') : []);\n  var oldPropClasses = arrayToMap(oldProps.className ? oldProps.className.split(' ') : []);\n  var finalClassNames = [];\n  // loop through each of the current classes on the component\n  // to see if it should be a part of the classNames added\n  currentClasses.forEach(function (currentClass) {\n    if (incomingPropClasses.has(currentClass)) {\n      // add it as its already included in classnames coming in from newProps\n      finalClassNames.push(currentClass);\n      incomingPropClasses.delete(currentClass);\n    } else if (!oldPropClasses.has(currentClass)) {\n      // add it as it has NOT been removed by user\n      finalClassNames.push(currentClass);\n    }\n  });\n  incomingPropClasses.forEach(function (s) {\n    return finalClassNames.push(s);\n  });\n  return finalClassNames.join(' ');\n}\n/**\n * Checks if an event is supported in the current execution environment.\n * @license Modernizr 3.0.0pre (Custom Build) | MIT\n */\nexport function isCoveredByReact(eventNameSuffix, doc) {\n  if (doc === void 0) {\n    doc = document;\n  }\n  var eventName = 'on' + eventNameSuffix;\n  var isSupported = eventName in doc;\n  if (!isSupported) {\n    var element = doc.createElement('div');\n    element.setAttribute(eventName, 'return;');\n    isSupported = typeof element[eventName] === 'function';\n  }\n  return isSupported;\n}\nexport function syncEvent(node, eventName, newEventHandler) {\n  var eventStore = node.__events || (node.__events = {});\n  var oldEventHandler = eventStore[eventName];\n  // Remove old listener so they don't double up.\n  if (oldEventHandler) {\n    node.removeEventListener(eventName, oldEventHandler);\n  }\n  if (newEventHandler != null) {\n    // Bind new listener.\n    node.addEventListener(eventName, eventStore[eventName] = function handler(e) {\n      newEventHandler.call(this, e);\n    });\n  }\n}\nfunction arrayToMap(arr) {\n  var map = new Map();\n  arr.forEach(function (s) {\n    return map.set(s, s);\n  });\n  return map;\n}","map":{"version":3,"names":["attachEventProps","node","newProps","oldProps","className","getClassName","classList","Object","keys","forEach","name","indexOf","toUpperCase","eventName","substring","eventNameLc","toLowerCase","isCoveredByReact","syncEvent","currentClasses","arrayToMap","incomingPropClasses","split","oldPropClasses","finalClassNames","currentClass","has","push","delete","s","join","eventNameSuffix","doc","document","isSupported","element","createElement","setAttribute","newEventHandler","eventStore","__events","oldEventHandler","removeEventListener","addEventListener","handler","e","call","arr","map","Map","set"],"sources":["../../../src/react-component-lib/utils/attachEventProps.ts"],"sourcesContent":[null],"mappings":"AAAA,OAAM,SAAUA,gBAAgBA,CAACC,IAAiB,EAAEC,QAAa,EAAEC,QAAkB;EAAlB,IAAAA,QAAA;IAAAA,QAAA,KAAkB;EAAA;EACnF,IAAMC,SAAS,GAAGC,YAAY,CAACJ,IAAI,CAACK,SAAS,EAAEJ,QAAQ,EAAEC,QAAQ,CAAC;EAClE,IAAIC,SAAS,EAAE;IACbH,IAAI,CAACG,SAAS,GAAGA,SAAS;;EAG5BG,MAAM,CAACC,IAAI,CAACN,QAAQ,CAAC,CAACO,OAAO,CAAC,UAAAC,IAAI;IAChC,IAAIA,IAAI,KAAK,UAAU,IAAIA,IAAI,KAAK,OAAO,IAAIA,IAAI,KAAK,KAAK,IAAIA,IAAI,KAAK,WAAW,EAAE;MACrF;;IAEF,IAAIA,IAAI,CAACC,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,IAAID,IAAI,CAAC,CAAC,CAAC,KAAKA,IAAI,CAAC,CAAC,CAAC,CAACE,WAAW,EAAE,EAAE;MACjE,IAAMC,SAAS,GAAGH,IAAI,CAACI,SAAS,CAAC,CAAC,CAAC;MACnC,IAAMC,WAAW,GAAGF,SAAS,CAAC,CAAC,CAAC,CAACG,WAAW,EAAE,GAAGH,SAAS,CAACC,SAAS,CAAC,CAAC,CAAC;MAEvE,IAAI,CAACG,gBAAgB,CAACF,WAAW,CAAC,EAAE;QAClCG,SAAS,CAACjB,IAAI,EAAEc,WAAW,EAAEb,QAAQ,CAACQ,IAAI,CAAC,CAAC;;KAE/C,MAAM;MACJT,IAAY,CAACS,IAAI,CAAC,GAAGR,QAAQ,CAACQ,IAAI,CAAC;;EAExC,CAAC,CAAC;AACJ;AAEA,OAAM,SAAUL,YAAYA,CAACC,SAAuB,EAAEJ,QAAa,EAAEC,QAAa;EAChF;EACA,IAAMgB,cAAc,GAAGC,UAAU,CAACd,SAAS,CAAC;EAC5C,IAAMe,mBAAmB,GAAGD,UAAU,CAAClB,QAAQ,CAACE,SAAS,GAAGF,QAAQ,CAACE,SAAS,CAACkB,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;EAC/F,IAAMC,cAAc,GAAGH,UAAU,CAACjB,QAAQ,CAACC,SAAS,GAAGD,QAAQ,CAACC,SAAS,CAACkB,KAAK,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;EAC1F,IAAME,eAAe,GAAa,EAAE;EACpC;EACA;EACAL,cAAc,CAACV,OAAO,CAAC,UAAAgB,YAAY;IACjC,IAAIJ,mBAAmB,CAACK,GAAG,CAACD,YAAY,CAAC,EAAE;MACzC;MACAD,eAAe,CAACG,IAAI,CAACF,YAAY,CAAC;MAClCJ,mBAAmB,CAACO,MAAM,CAACH,YAAY,CAAC;KACzC,MAAM,IAAI,CAACF,cAAc,CAACG,GAAG,CAACD,YAAY,CAAC,EAAE;MAC5C;MACAD,eAAe,CAACG,IAAI,CAACF,YAAY,CAAC;;EAEtC,CAAC,CAAC;EACFJ,mBAAmB,CAACZ,OAAO,CAAC,UAAAoB,CAAC;IAAI,OAAAL,eAAe,CAACG,IAAI,CAACE,CAAC,CAAC;EAAvB,CAAuB,CAAC;EACzD,OAAOL,eAAe,CAACM,IAAI,CAAC,GAAG,CAAC;AAClC;AAEA;;;;AAIA,OAAM,SAAUb,gBAAgBA,CAACc,eAAuB,EAAEC,GAAwB;EAAxB,IAAAA,GAAA;IAAAA,GAAA,GAAAC,QAAwB;EAAA;EAChF,IAAMpB,SAAS,GAAG,IAAI,GAAGkB,eAAe;EACxC,IAAIG,WAAW,GAAGrB,SAAS,IAAImB,GAAG;EAElC,IAAI,CAACE,WAAW,EAAE;IAChB,IAAMC,OAAO,GAAGH,GAAG,CAACI,aAAa,CAAC,KAAK,CAAC;IACxCD,OAAO,CAACE,YAAY,CAACxB,SAAS,EAAE,SAAS,CAAC;IAC1CqB,WAAW,GAAG,OAAQC,OAAe,CAACtB,SAAS,CAAC,KAAK,UAAU;;EAGjE,OAAOqB,WAAW;AACpB;AAEA,OAAM,SAAUhB,SAASA,CAACjB,IAAa,EAAEY,SAAiB,EAAEyB,eAAkC;EAC5F,IAAMC,UAAU,GAAItC,IAAY,CAACuC,QAAQ,KAAMvC,IAAY,CAACuC,QAAQ,GAAG,EAAE,CAAC;EAC1E,IAAMC,eAAe,GAAGF,UAAU,CAAC1B,SAAS,CAAC;EAE7C;EACA,IAAI4B,eAAe,EAAE;IACnBxC,IAAI,CAACyC,mBAAmB,CAAC7B,SAAS,EAAE4B,eAAe,CAAC;;EAGtD,IAAIH,eAAe,IAAI,IAAI,EAAE;IAC3B;IACArC,IAAI,CAAC0C,gBAAgB,CACnB9B,SAAS,EACR0B,UAAU,CAAC1B,SAAS,CAAC,GAAG,SAAS+B,OAAOA,CAACC,CAAQ;MAChDP,eAAe,CAACQ,IAAI,CAAC,IAAI,EAAED,CAAC,CAAC;IAC/B,CAAE,CACH;;AAEL;AAEA,SAASzB,UAAUA,CAAC2B,GAA4B;EAC9C,IAAMC,GAAG,GAAG,IAAIC,GAAG,EAAkB;EACpCF,GAAgB,CAACtC,OAAO,CAAC,UAACoB,CAAS;IAAK,OAAAmB,GAAG,CAACE,GAAG,CAACrB,CAAC,EAAEA,CAAC,CAAC;EAAb,CAAa,CAAC;EACvD,OAAOmB,GAAG;AACZ","ignoreList":[]},"metadata":{},"sourceType":"module"}